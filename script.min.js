import{hljs}from"./hl.js";const B=document.body,menuBtn=B.querySelector(".menu"),nav=B.querySelector("nav"),darken=B.querySelector(".darken"),main=B.querySelector("main");menuBtn.addEventListener("click",()=>{nav.className="show",darken.style.display="block",B.style.overflow="hidden"}),darken.addEventListener("click",()=>{nav.className="hide",darken.style.display="none",B.style.overflow="auto"});let i=+localStorage.getItem("NodejsGuidePageNumber");const showPage=async i=>{const url=`./chapters/${i}.js`;await import(url).then(data=>main.innerHTML=data.default),localStorage.setItem("NodejsGuidePageNumber",i),scrollTo(0,0),main.querySelectorAll("code").forEach(i=>i.className="lang-js"),hljs(window)};i&&showPage(i);const changePage=ev=>{if("-"===ev){if(1===i)return;i--}else{if(i===nav.querySelectorAll(".link").length)return;i++}showPage(i)};B.addEventListener("click",ev=>{if("link"===ev.target.className)i=+ev.target.dataset.url,showPage(i),darken.click();else if("LI"===ev.target.tagName&&ev.target.parentElement.parentElement===nav)i=+ev.target.children[0].dataset.url,showPage(i),darken.click();else if("prev"==ev.target.className)changePage("-");else{if("next"!==ev.target.className)return;changePage("+")}}),document.addEventListener("keydown",ev=>{if(37===ev.keyCode||65===ev.keyCode||100===ev.keyCode)changePage("-");else{if(39!==ev.keyCode&&68!==ev.keyCode&&102!==ev.keyCode)return;changePage("+")}}),navigator.serviceWorker.register("./sw.js").catch(er=>console.error(er));